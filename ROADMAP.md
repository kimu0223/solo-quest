# 📅 Solo Quest：MVP開発 30日間 ロードマップ

## 🛠 第1週：土台構築と「アウェイクニング」
目標：アプリを起動し、自分の分身（勇者）を作成して、ホーム画面に立つ。

- [x] **Day 1：環境構築**
    - [x] Expoプロジェクト作成 (`npx create-expo-app`)
    - [x] Supabaseプロジェクト作成
    - [x] **DBテーブル作成 (SQL実行)**
        - [x] SQL Editorで `profiles`, `players`, `quests`, `appraisal_logs` を作成
        - [x] RLSポリシー（セキュリティ設定）を有効化
- [ ] **Day 2：認証の実装 (`app/auth.tsx`)**
    - [ ] `lib/supabase.ts` の作成（APIキー設定）
    - [ ] ログイン画面UI作成（メアド・パスワード入力欄）
    - [ ] **新規登録処理**: `supabase.auth.signUp()`
    - [ ] **ログイン処理**: `supabase.auth.signInWithPassword()`
- [ ] **Day 3：オンボーディング (`app/onboarding.tsx`)**
    - [ ] プレイヤーデータの有無チェック処理
    - [ ] 「勇者のなまえ」入力フォーム
    - [ ] **マナ・カラー選択**: 5色の選択UIと状態保存
    - [ ] **保存処理**: `players` テーブルへの `insert`
- [ ] **Day 4：テーマ連動の実装 (Global State)**
    - [ ] マナ・カラーの変数化（ThemeContext等）
    - [ ] ヘッダー、ボタン色の動的変更処理
- [ ] **Day 5：メイン画面の骨組み (`app/(tabs)/index.tsx`)**
    - [ ] 勇者名・Lv・XPバーの表示エリア
    - [ ] クエスト一覧用 `FlatList` の配置

## 📝 第2週：クエスト管理とデータ連携
目標：親が「宿題」を追加し、子供が「完了」してXPを得るサイクルを作る。

- [ ] **Day 6：ギルドマスターモードへの入り口**
    - [ ] 設定アイコンの配置
    - [ ] **ゲートキーパー**: 算数クイズ等のチャイルドロック実装
- [ ] **Day 7：クエスト追加機能 (`app/admin.tsx`)**
    - [ ] クエスト名入力フォームと追加ボタン
    - [ ] **追加処理**: `supabase.from('quests').insert()`
- [ ] **Day 8：クエスト表示と完了 (`app/(tabs)/index.tsx`)**
    - [ ] `useEffect` でクエスト取得（`is_completed: false`）
    - [ ] **完了ボタン**: `supabase.from('quests').update()`
- [ ] **Day 9：XP加算ロジック**
    - [ ] クエスト完了時のXP加算処理
    - [ ] **アニメーション**: XPバーの伸長演出
- [ ] **Day 10：レベルアップ計算**
    - [ ] レベル計算式 `100 * (Lv-1)^2` の実装
    - [ ] レベルアップ時のアラート/演出

## 🤖 第3週：AI鑑定（Geminiの耳・直結実装）
目標：マイクに向かって話すと、AIが褒めてくれてランクが付く。

- [ ] **Day 11：音声録音機能 (`expo-av`)**
    - [ ] `expo-av` インストールとマイク権限取得
    - [ ] **録音ロジック**: 開始/停止とURI取得
- [ ] **Day 12：Gemini連携の土台 (`lib/gemini.ts`)**
    - [ ] 音声ファイルのBase64変換処理
    - [ ] `gemini-1.5-flash` (または `gemini-3-flash`) への送信テスト
- [ ] **Day 13：プロンプトエンジニアリング**
    - [ ] 「文字起こし・ランク・褒め言葉」のJSON指示プロンプト
    - [ ] レスポンスからのJSON抽出処理
- [ ] **Day 14：鑑定演出の実装 (UI)**
    - [ ] マイクボタンとローディング表示
    - [ ] **結果モーダル**: ランクとコメントの表示
- [ ] **Day 15：鑑定ボーナスの反映**
    - [ ] ランク別XP加算（S=100, A=50...）
    - [ ] 一連の動作（録音→鑑定→XP獲得）の通しテスト

## ✨ 第4週：総仕上げと磨き込み
目標：アプリとしてリリース（テスト配布）できる品質にする。

- [ ] **Day 16：管理者ログと履歴**
    - [ ] `appraisal_logs` へのテキスト結果保存
    - [ ] 親モードでの履歴リスト表示
- [ ] **Day 17：設定とUI調整**
    - [ ] ハンバーガーメニュー実装
    - [ ] マナ・カラー変更機能
- [ ] **Day 18：法務・ガイドライン対応**
    - [ ] 利用規約・プライバシーポリシー表示
    - [ ] ログアウト・アカウント削除機能
- [ ] **Day 19：収益化基盤（Lv.10制限）**
    - [ ] **制限ロジック**: `if (Lv < 10) Alert("まだ早い")`
    - [ ] 開発用デバッグフラグの用意
- [ ] **Day 20：実機テストとバグ修正**
    - [ ] 実機（4G/5G）での動作確認
    - [ ] 第三者（家族など）による操作テスト
- [ ] **Day 21〜30：予備日 & ブラッシュアップ**
    - [ ] アバター/アイコン追加
    - [ ] 効果音（SE）追加